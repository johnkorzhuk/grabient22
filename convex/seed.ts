import { mutation } from './_generated/server';
import { v } from 'convex/values';
import type { Tuple } from '@thi.ng/api';

/**
 * Seed the collections table with CosGradientPresets data.
 * This function will add all the gradient presets from seedData.ts to the collections table.
 */
export const seedCollections = mutation({
  args: {},
  returns: v.number(),
  handler: async (ctx) => {
    let count = 0;

    // Iterate through all gradient presets and add them to the collections table
    for (const [key, preset] of Object.entries(cosGradientsPresets)) {
      await ctx.db.insert('collections', {
        coeffs: preset.coeffs,
        numStops: preset.numStops,
        globals: preset.globals,
      });
      count++;
    }

    console.log(`Successfully seeded ${count} gradient presets to the collections table.`);
    return count;
  },
});

type GradientCoeffs = [Tuple<number, 4>, Tuple<number, 4>, Tuple<number, 4>, Tuple<number, 4>];

type CosGradientPreset = {
  coeffs: GradientCoeffs;
  numStops: number;
  globals: Tuple<number, 4>;
  id: string;
};

type CosGradientPresets = Record<string, CosGradientPreset>;

const cosGradientsPresets: CosGradientPresets = {
  custom2: {
    id: 'custom2',
    coeffs: [
      [0.6824829447322633, 0.4847113864668177, 0.2240798845368405, 1],
      [-0.31751705526773666, -0.29611827819590014, 0.028044170833745524, 0],
      [0.4491490925264679, 0.5695645919340133, 0.08043269821896848, 1.0],
      [2.96710247389084, 1.0495907180019393, 2.3233953456365977, 1.0],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-NpvW4': {
    id: 'custom-NpvW4',
    coeffs: [
      [0.388, 0.062, 0.444, 1],
      [-0.516, 0.711, -0.301, 1],
      [-0.174, -0.088, 0.232, 1],
      [-0.02, -0.201, 0.446, 1],
    ],
    numStops: 4,
    globals: [0.37, 1.47, 1.37, -0.561592653589793],
  },
  'custom-I33v2': {
    id: 'custom-I33v2',
    coeffs: [
      [0.453, 0.477, 0.402, 1],
      [0.151, 0.279, 0.255, 1],
      [0.3204, 0.9486000000000001, 0.6084, 1],
      [1.4134073464102073, 3.4664073464102074, 3.6134073464102077, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom--cs8y': {
    id: 'custom--cs8y',
    coeffs: [
      [0.989, 0.219, 0.533, 1],
      [0.734, 0.197, 0.916, 1],
      [0.21672, 0.15696, 0.28847999999999996, 1],
      [3.550407346410207, 2.564407346410207, 4.718407346410206, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-WqXvP': {
    id: 'custom-WqXvP',
    coeffs: [
      [0.8, 0.6, 0.4, 1],
      [0.6, 0.4, 0.2, 1],
      [0.3, 0.2, 0.1, 1],
      [0, 0.33, 0.67, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-Uke8a': {
    id: 'custom-Uke8a',
    coeffs: [
      [0.335, 0.137, 0.205, 1],
      [-0.418, 0.123, -0.005, 1],
      [0.301, -0.495, -0.255, 1],
      [0.238, 0.445, -0.162, 1],
    ],
    numStops: 25,
    globals: [0.26, 1, 1, 0],
  },
  'custom-_y5F_': {
    id: 'custom-_y5F_',
    coeffs: [
      [0.178, 0.591, 0.186, 1],
      [0.303, -0.671592653589793, -0.204, 1],
      [0.41, 0.35524684096453213, -0.092, 1],
      [-0.47, -0.127, -0.082, 1],
    ],
    numStops: 16,
    globals: [0.26, 1, 0.74, 0.118407346410207],
  },
  'deep-sea': {
    id: 'deep-sea',
    coeffs: [
      [-0.182, 0.51, 0.123, 1],
      [-0.42, 0.4, -0.657, 1],
      [-0.267, -0.478, 0.302, 1],
      [-0.414, -0.504, 0.214, 1],
    ],
    numStops: 10,
    globals: [0, 1, 0.88, 0],
  },
  'custom-YPsnG': {
    id: 'custom-YPsnG',
    coeffs: [
      [0.628407346410207, 0.4847113864668177, 0.2240798845368405, 1],
      [-0.31751705526773666, -0.29611827819590014, 0.498407346410207, 1],
      [-1.21159265358979, -0.791592653589793, 0.518407346410207, 1],
      [2.96710247389084, 1.0495907180019393, 0.638407346410207, 1],
    ],
    numStops: 15,
    globals: [0, 1, 0.34, -1.64159265358979],
  },
  'custom-c9xvq': {
    id: 'custom-c9xvq',
    coeffs: [
      [0.628407346410207, 0.4847113864668177, 0.2240798845368405, 1],
      [-0.31751705526773666, -0.29611827819590014, 0.498407346410207, 1],
      [-1.21159265358979, -0.791592653589793, 0.518407346410207, 1],
      [2.96710247389084, 1.0495907180019393, 0.638407346410207, 1],
    ],
    numStops: 5,
    globals: [0, 1, 0.34, -1.59159265358979],
  },
  'custom-ErLzH': {
    id: 'custom-ErLzH',
    coeffs: [
      [0.057, 0.242, 0.669, 1],
      [-0.169, 0.674, -0.206, 1],
      [-0.158, -0.131, -0.298, 1],
      [-0.323, -0.098, 0.063, 1],
    ],
    numStops: 26,
    globals: [0.32, 0.84, 1.57, 0],
  },
  'custom-Awo5_': {
    id: 'custom-Awo5_',
    coeffs: [
      [0.658, 0.19, -0.112, 1],
      [0.616, 0.365, 0.363, 1],
      [0.398, 0.694, -0.086, 1],
      [0.272, 0.233, -0.136, 1],
    ],
    numStops: 37,
    globals: [0.46, 1.48, 1.05, -0.011592653589793],
  },
  'custom-k-FQc': {
    id: 'custom-k-FQc',
    coeffs: [
      [0.751, 0.919, 0.898, 1],
      [0.27, 0.417, 0.344, 1],
      [0.31801, 0.28497, 0.38232, 1],
      [5.086407346410207, 5.513407346410206, 0.5604073464102071, 1],
    ],
    numStops: 4,
    globals: [0, 1, 1, -0.421592653589793],
  },
  'custom-VKzin': {
    id: 'custom-VKzin',
    coeffs: [
      [0.282, 0.265, 0.474, 1],
      [-0.067, -0.297, -0.158, 1],
      [-0.269, 0.27, 0.574, 1],
      [-0.358, -0.351, -0.447, 1],
    ],
    numStops: 13,
    globals: [0.23, 1, 1.17, -0.421592653589793],
  },
  custom1: {
    id: 'custom1',
    coeffs: [
      [0.4922, 0.2043, 0.3775, 1],
      [0.1577, 0.2446, 0.1518, 1],
      [0.5218, 0.6125, 0.3702, 1],
      [5.8228, 4.138, 1.4912, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-ejbtS': {
    id: 'custom-ejbtS',
    coeffs: [
      [0.844, 1.1300000000000001, 0.691, 1],
      [0.8789000000000001, 0.8558000000000001, 0.20240000000000002, 1],
      [0.28292, 0.25123999999999996, 0.6331600000000001, 1],
      [3.814407346410207, 2.504407346410207, 1.389407346410207, 1],
    ],
    numStops: 26,
    globals: [0, 1, 0.75, 0.038407346410207],
  },
  'custom-EeySJ': {
    id: 'custom-EeySJ',
    coeffs: [
      [0.369, 0.356, 0.17, 1],
      [0.178, 0.373, -1.3468732026062182, 1],
      [-0.218, -0.307, 0.058, 1],
      [-0.141, 0.106, 0.059, 1],
    ],
    numStops: 10,
    globals: [0, 0.61, 1.51, 0.588407346410207],
  },

  'custom-wuPPq': {
    id: 'custom-wuPPq',
    coeffs: [
      [0.247, 0.412, 0.044, 1],
      [1.2325599999999999, 1.20274, 0.33512, 1],
      [0.03456, 0.055080000000000004, 0.05568, 1],
      [1.749, 5.739, 2.387, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-rAYK8': {
    id: 'custom-rAYK8',
    coeffs: [
      [0.086, 0.779, 0.622, 1],
      [0.22878, 0.28576999999999997, 0.10947, 1],
      [0.27566, 0.18248999999999999, 0.82621, 1],
      [-0.30959265358978993, 1.7824073464102101, 1.59340734641021, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-C2qle': {
    id: 'custom-C2qle',
    coeffs: [
      [0.773, 0.33699999999999997, 0.34099999999999997, 1],
      [0.3876, 0.31312, 0.20520000000000002, 1],
      [0.77103, 1.16766, 0.5183099999999999, 1],
      [6.619407346410207, 6.413407346410207, 2.151407346410207, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-n8_Do': {
    id: 'custom-n8_Do',
    coeffs: [
      [0.671, 0.706, 0.232, 1],
      [0.31242, 0.53628, 0.3321, 1],
      [0.55833, 0.48802999999999996, 0.5698, 1],
      [5.129407346410207, 0.3854073464102069, 2.687407346410207, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-vv8MH': {
    id: 'custom-vv8MH',
    coeffs: [
      [0.397, 0.16700000000000004, 0.127, 1],
      [0.29756, 0.12125999999999999, 0.21328, 1],
      [0.588, 0.1272, 0.09000000000000001, 1],
      [3.396407346410207, 0.759407346410207, 1.798407346410207, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-ipJ1J': {
    id: 'custom-ipJ1J',
    coeffs: [
      [0.9870000000000001, 0.671, 0.611, 1],
      [0.40807000000000004, 0.36135, 0.027739999999999997, 1],
      [0.54352, 0.70434, 0.66908, 1],
      [1.000407346410207, -0.09159265358979296, 4.852407346410207, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-2i-ui': {
    id: 'custom-2i-ui',
    coeffs: [
      [0.989, 0.219, 0.533, 1],
      [0.734, 0.197, 0.916, 1],
      [0.0693504, 0.0502272, 0.09231359999999998, 1],
      [3.4988146928204142, 2.512814692820414, 4.666814692820413, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-phm2Y': {
    id: 'custom-phm2Y',
    coeffs: [
      [0.04, 0.509, 0.869, 1],
      [0.292, 0.438, 0.202, 1],
      [1.1850300000000002, 0.24138, 0.06885000000000001, 1],
      [4.758, 2.072, 4.748, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-aXLgu': {
    id: 'custom-aXLgu',
    coeffs: [
      [0.603, 0.615, 0.11100000000000002, 1],
      [0.20882, 0.3816, 0.23691, 1],
      [0.67671, 0.60444, 0.29784, 1],
      [0.9154073464102099, -0.87159265358979, 3.6544073464102103, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-N_Fw5': {
    id: 'custom-N_Fw5',
    coeffs: [
      [0.487, 0.304, 0.285, 1],
      [0.411, 0.918, 0.317, 1],
      [0.11718, 0.15036, 0.012599999999999998, 1],
      [6.014, 5.762, 2.999, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-5ZcsH': {
    id: 'custom-5ZcsH',
    coeffs: [
      [0.331, 0.638, 0.966, 1],
      [0.181, 0.732, 0.177, 1],
      [0.7272, 0.20232, 0.36791999999999997, 1],
      [5.171, 6.222, 2.54, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-nZR21': {
    id: 'custom-nZR21',
    coeffs: [
      [0.751, 0.919, 0.898, 1],
      [0.27, 0.417, 0.344, 1],
      [0.31801, 0.28497, 0.38232, 1],
      [5.086407346410207, 5.513407346410206, 0.5604073464102071, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-FjQlb': {
    id: 'custom-FjQlb',
    coeffs: [
      [0.639, 0.678, 0.021, 1],
      [0.298, 0.477, 0.975, 1],
      [0.353808, 0.209304, 0.390744, 1],
      [4.064, 3.265, 1.841, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-6lUV_': {
    id: 'custom-6lUV_',
    coeffs: [
      [0.5609999999999999, 0.5549999999999999, -0.0049999999999999975, 1],
      [0.09584, 0.15744, 0.14928000000000002, 1],
      [0.4005, 0.13528, 0.88466, 1],
      [-0.49759265358979, 0.8374073464102101, 0.9314073464102102, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-caLxz': {
    id: 'custom-caLxz',
    coeffs: [
      [0.41, 0.783, 0.624, 1],
      [0.906, 0.236, 0.135, 1],
      [0.54096, 0.40208000000000005, 0.42448, 1],
      [6.87240734641021, 7.081407346410209, 4.34640734641021, 1],
    ],
    numStops: 26,
    globals: [0, 1.13, 1.27, 0],
  },
  'custom-wDOVw': {
    id: 'custom-wDOVw',
    coeffs: [
      [0.091, 0.569, 0.745, 1],
      [0.3003, 0.33792, 0.04422, 1],
      [0.53244, 0.8351999999999999, 1.45464, 1],
      [1.417407346410207, 5.558407346410207, 0.5464073464102069, 1],
    ],
    numStops: 7,
    globals: [0.1, 0.66, 0.96, 0.058407346410207],
  },
  'custom-nDXfO': {
    id: 'custom-nDXfO',
    coeffs: [
      [0.508, 0.279, 0.383, 1],
      [-0.395, -0.281, 0.267, 1],
      [0.607, -0.436, -0.503, 1],
      [-0.149, -0.188, -0.051, 1],
    ],
    numStops: 26,
    globals: [0, 1, 1, 0],
  },
  'custom-OMd-c': {
    id: 'custom-OMd-c',
    coeffs: [
      [0.12099999999999998, 0.537, 0.092, 1],
      [0.08075, 0.39425, 0.9062999999999999, 1],
      [0.44505, 0.04902, 0.36635999999999996, 1],
      [5.932, 0.578, 3.602, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-0P8rn': {
    id: 'custom-0P8rn',
    coeffs: [
      [0.541, 0.054, 0.191, 1],
      [0.346, 0.128, 0.05, 1],
      [0.291, 0.371, 0.462, 1],
      [2.053, 1.614, 4.343, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-t43An': {
    id: 'custom-t43An',
    coeffs: [
      [0.27, 0.567, 0.502, 1],
      [0.596, 0.369, 0.078, 1],
      [0.483, 0.408, 1.333, 1],
      [5.517, 4.735, 2.063, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-8EwJy': {
    id: 'custom-8EwJy',
    coeffs: [
      [0.2, 0.8, 0.6, 1],
      [0.4, 0.6, 0.8, 1],
      [0.6, 0.4, 0.2, 1],
      [0, 0.33, 0.67, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  custom3: {
    id: 'custom3',
    coeffs: [
      [0.98, 0.98, 0.348, 1],
      [0.53, 0.53, 0.53, 1],
      [0.25, 0.25, 0.25, 1],
      [0, 0.33, 0.67, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-vLKdE': {
    id: 'custom-vLKdE',
    coeffs: [
      [0.938, 0.991, 0.68, 1],
      [0.672, 0.678, 0.102, 1],
      [0.6889892295346084, 0.6180802893799119, 0.6342720946120868, 1],
      [3.210814692820414, 2.141814692820414, 2.938814692820414, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-v2zZh': {
    id: 'custom-v2zZh',
    coeffs: [
      [0.436, 0.488, 0.574, 1],
      [0.09, 0.079, 0.503, 1],
      [0.041, 0.969, 0.009, 1],
      [6.055, 4.405, 0.011, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-TNd_-': {
    id: 'custom-TNd_-',
    coeffs: [
      [0.635, 1.004, 0.368, 1],
      [0.20879999999999999, 0.7355999999999999, 0.0096, 1],
      [0.10425000000000001, 0.23925000000000002, 0.77325, 1],
      [1.854, 0.571, 5.27, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-TJgC9': {
    id: 'custom-TJgC9',
    coeffs: [
      [0.55, 0.396, 0.588, 1],
      [0.777, 0.088, 0.144, 1],
      [0.24, 0.794, 0.134, 1],
      [4.037, 2.806, 4.797, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },

  'custom-e7-OH': {
    id: 'custom-e7-OH',
    coeffs: [
      [0.536, 0.607, 0.232, 1],
      [0.599, 0.434, 0.206, 1],
      [0.006, 0.546, 0.385, 1],
      [2.884, 3.138, 4.892, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-jjxmu': {
    id: 'custom-jjxmu',
    coeffs: [
      [0.533, 0.566, 0.97, 1],
      [0.297, 0.495, 0.789, 1],
      [0.028, 0.111, 0.336, 1],
      [3.579, 1.047, 4.604, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
  'custom-C8tOe': {
    id: 'custom-C8tOe',
    coeffs: [
      [0.425, 0.508, 0.757, 1],
      [0.382, 0.902, 0.308, 1],
      [0.20148000000000002, 0.036570000000000005, 0.2921, 1],
      [2.696407346410207, 2.727407346410207, 4.431407346410206, 1],
    ],
    numStops: 10,
    globals: [0, 1, 1, 0],
  },
};
