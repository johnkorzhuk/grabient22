{"version":3,"file":"CollectionsDisplay-C-GoTGzb.js","sources":["../../../../../node_modules/.pnpm/convex@1.24.1_@clerk+clerk-_513f831a0b80705ffd8bda7c8ad7754d/node_modules/convex/dist/esm/values/compare_utf8.js","../../../../../node_modules/.pnpm/convex@1.24.1_@clerk+clerk-_513f831a0b80705ffd8bda7c8ad7754d/node_modules/convex/dist/esm/react/queries_observer.js","../../../../../node_modules/.pnpm/convex@1.24.1_@clerk+clerk-_513f831a0b80705ffd8bda7c8ad7754d/node_modules/convex/dist/esm/react/use_subscription.js","../../../../../node_modules/.pnpm/convex@1.24.1_@clerk+clerk-_513f831a0b80705ffd8bda7c8ad7754d/node_modules/convex/dist/esm/react/use_queries.js","../../../../../node_modules/.pnpm/convex@1.24.1_@clerk+clerk-_513f831a0b80705ffd8bda7c8ad7754d/node_modules/convex/dist/esm/react/use_paginated_query.js","../../../../../node_modules/.pnpm/lucide-react@0.475.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/square-pen.js","../../../../../src/components/CollectionsDisplay.tsx"],"sourcesContent":["\"use strict\";\nexport function compareUTF8(a, b) {\n  const aLength = a.length;\n  const bLength = b.length;\n  const length = Math.min(aLength, bLength);\n  for (let i = 0; i < length; ) {\n    const aCodePoint = a.codePointAt(i);\n    const bCodePoint = b.codePointAt(i);\n    if (aCodePoint !== bCodePoint) {\n      if (aCodePoint < 128 && bCodePoint < 128) {\n        return aCodePoint - bCodePoint;\n      }\n      const aLength2 = utf8Bytes(aCodePoint, aBytes);\n      const bLength2 = utf8Bytes(bCodePoint, bBytes);\n      return compareArrays(aBytes, aLength2, bBytes, bLength2);\n    }\n    i += utf16LengthForCodePoint(aCodePoint);\n  }\n  return aLength - bLength;\n}\nfunction compareArrays(a, aLength, b, bLength) {\n  const length = Math.min(aLength, bLength);\n  for (let i = 0; i < length; i++) {\n    const aValue = a[i];\n    const bValue = b[i];\n    if (aValue !== bValue) {\n      return aValue - bValue;\n    }\n  }\n  return aLength - bLength;\n}\nexport function utf16LengthForCodePoint(aCodePoint) {\n  return aCodePoint > 65535 ? 2 : 1;\n}\nconst arr = () => Array.from({ length: 4 }, () => 0);\nconst aBytes = arr();\nconst bBytes = arr();\nfunction utf8Bytes(codePoint, bytes) {\n  if (codePoint < 128) {\n    bytes[0] = codePoint;\n    return 1;\n  }\n  let count;\n  let offset;\n  if (codePoint <= 2047) {\n    count = 1;\n    offset = 192;\n  } else if (codePoint <= 65535) {\n    count = 2;\n    offset = 224;\n  } else if (codePoint <= 1114111) {\n    count = 3;\n    offset = 240;\n  } else {\n    throw new Error(\"Invalid code point\");\n  }\n  bytes[0] = (codePoint >> 6 * count) + offset;\n  let i = 1;\n  for (; count > 0; count--) {\n    const temp = codePoint >> 6 * (count - 1);\n    bytes[i++] = 128 | temp & 63;\n  }\n  return i;\n}\nexport function greaterThan(a, b) {\n  return compareUTF8(a, b) > 0;\n}\nexport function greaterThanEq(a, b) {\n  return compareUTF8(a, b) >= 0;\n}\nexport function lessThan(a, b) {\n  return compareUTF8(a, b) < 0;\n}\nexport function lessThanEq(a, b) {\n  return compareUTF8(a, b) <= 0;\n}\n//# sourceMappingURL=compare_utf8.js.map\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nimport { convexToJson } from \"../values/index.js\";\nimport { getFunctionName } from \"../server/api.js\";\nexport class QueriesObserver {\n  constructor(createWatch) {\n    __publicField(this, \"createWatch\");\n    __publicField(this, \"queries\");\n    __publicField(this, \"listeners\");\n    this.createWatch = createWatch;\n    this.queries = {};\n    this.listeners = /* @__PURE__ */ new Set();\n  }\n  setQueries(newQueries) {\n    for (const identifier of Object.keys(newQueries)) {\n      const { query, args } = newQueries[identifier];\n      getFunctionName(query);\n      if (this.queries[identifier] === void 0) {\n        this.addQuery(identifier, query, args);\n      } else {\n        const existingInfo = this.queries[identifier];\n        if (getFunctionName(query) !== getFunctionName(existingInfo.query) || JSON.stringify(convexToJson(args)) !== JSON.stringify(convexToJson(existingInfo.args))) {\n          this.removeQuery(identifier);\n          this.addQuery(identifier, query, args);\n        }\n      }\n    }\n    for (const identifier of Object.keys(this.queries)) {\n      if (newQueries[identifier] === void 0) {\n        this.removeQuery(identifier);\n      }\n    }\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    return () => {\n      this.listeners.delete(listener);\n    };\n  }\n  getLocalResults(queries) {\n    const result = {};\n    for (const identifier of Object.keys(queries)) {\n      const { query, args } = queries[identifier];\n      getFunctionName(query);\n      const watch = this.createWatch(query, args);\n      let value;\n      try {\n        value = watch.localQueryResult();\n      } catch (e) {\n        if (e instanceof Error) {\n          value = e;\n        } else {\n          throw e;\n        }\n      }\n      result[identifier] = value;\n    }\n    return result;\n  }\n  setCreateWatch(createWatch) {\n    this.createWatch = createWatch;\n    for (const identifier of Object.keys(this.queries)) {\n      const { query, args, watch } = this.queries[identifier];\n      const journal = watch.journal();\n      this.removeQuery(identifier);\n      this.addQuery(identifier, query, args, journal);\n    }\n  }\n  destroy() {\n    for (const identifier of Object.keys(this.queries)) {\n      this.removeQuery(identifier);\n    }\n    this.listeners = /* @__PURE__ */ new Set();\n  }\n  addQuery(identifier, query, args, journal) {\n    if (this.queries[identifier] !== void 0) {\n      throw new Error(\n        `Tried to add a new query with identifier ${identifier} when it already exists.`\n      );\n    }\n    const watch = this.createWatch(query, args, journal);\n    const unsubscribe = watch.onUpdate(() => this.notifyListeners());\n    this.queries[identifier] = {\n      query,\n      args,\n      watch,\n      unsubscribe\n    };\n  }\n  removeQuery(identifier) {\n    const info = this.queries[identifier];\n    if (info === void 0) {\n      throw new Error(`No query found with identifier ${identifier}.`);\n    }\n    info.unsubscribe();\n    delete this.queries[identifier];\n  }\n  notifyListeners() {\n    for (const listener of this.listeners) {\n      listener();\n    }\n  }\n}\n//# sourceMappingURL=queries_observer.js.map\n","\"use strict\";\nimport { useEffect, useState } from \"react\";\nexport function useSubscription({\n  // (Synchronously) returns the current value of our subscription.\n  getCurrentValue,\n  // This function is passed an event handler to attach to the subscription.\n  // It should return an unsubscribe function that removes the handler.\n  subscribe\n}) {\n  const [state, setState] = useState(() => ({\n    getCurrentValue,\n    subscribe,\n    value: getCurrentValue()\n  }));\n  let valueToReturn = state.value;\n  if (state.getCurrentValue !== getCurrentValue || state.subscribe !== subscribe) {\n    valueToReturn = getCurrentValue();\n    setState({\n      getCurrentValue,\n      subscribe,\n      value: valueToReturn\n    });\n  }\n  useEffect(() => {\n    let didUnsubscribe = false;\n    const checkForUpdates = () => {\n      if (didUnsubscribe) {\n        return;\n      }\n      setState((prevState) => {\n        if (prevState.getCurrentValue !== getCurrentValue || prevState.subscribe !== subscribe) {\n          return prevState;\n        }\n        const value = getCurrentValue();\n        if (prevState.value === value) {\n          return prevState;\n        }\n        return { ...prevState, value };\n      });\n    };\n    const unsubscribe = subscribe(checkForUpdates);\n    checkForUpdates();\n    return () => {\n      didUnsubscribe = true;\n      unsubscribe();\n    };\n  }, [getCurrentValue, subscribe]);\n  return valueToReturn;\n}\n//# sourceMappingURL=use_subscription.js.map\n","\"use strict\";\nimport { useEffect, useMemo, useState } from \"react\";\nimport { useConvex } from \"./client.js\";\nimport { QueriesObserver } from \"./queries_observer.js\";\nimport { useSubscription } from \"./use_subscription.js\";\nexport function useQueries(queries) {\n  const convex = useConvex();\n  if (convex === void 0) {\n    throw new Error(\n      \"Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app\"\n    );\n  }\n  const createWatch = useMemo(() => {\n    return (query, args, journal) => {\n      return convex.watchQuery(query, args, { journal });\n    };\n  }, [convex]);\n  return useQueriesHelper(queries, createWatch);\n}\nexport function useQueriesHelper(queries, createWatch) {\n  const [observer] = useState(() => new QueriesObserver(createWatch));\n  if (observer.createWatch !== createWatch) {\n    observer.setCreateWatch(createWatch);\n  }\n  useEffect(() => () => observer.destroy(), [observer]);\n  const subscription = useMemo(\n    () => ({\n      getCurrentValue: () => {\n        return observer.getLocalResults(queries);\n      },\n      subscribe: (callback) => {\n        observer.setQueries(queries);\n        return observer.subscribe(callback);\n      }\n    }),\n    [observer, queries]\n  );\n  return useSubscription(subscription);\n}\n//# sourceMappingURL=use_queries.js.map\n","\"use strict\";\nimport { useMemo, useState } from \"react\";\nimport { ConvexError, convexToJson } from \"../values/index.js\";\nimport { useQueries } from \"./use_queries.js\";\nimport {\n  getFunctionName\n} from \"../server/api.js\";\nimport { useConvex } from \"./client.js\";\nimport { compareValues } from \"../values/compare.js\";\nconst splitQuery = (key, splitCursor, continueCursor) => (prevState) => {\n  const queries = { ...prevState.queries };\n  const splitKey1 = prevState.nextPageKey;\n  const splitKey2 = prevState.nextPageKey + 1;\n  const nextPageKey = prevState.nextPageKey + 2;\n  queries[splitKey1] = {\n    query: prevState.query,\n    args: {\n      ...prevState.args,\n      paginationOpts: {\n        ...prevState.queries[key].args.paginationOpts,\n        endCursor: splitCursor\n      }\n    }\n  };\n  queries[splitKey2] = {\n    query: prevState.query,\n    args: {\n      ...prevState.args,\n      paginationOpts: {\n        ...prevState.queries[key].args.paginationOpts,\n        cursor: splitCursor,\n        endCursor: continueCursor\n      }\n    }\n  };\n  const ongoingSplits = { ...prevState.ongoingSplits };\n  ongoingSplits[key] = [splitKey1, splitKey2];\n  return {\n    ...prevState,\n    nextPageKey,\n    queries,\n    ongoingSplits\n  };\n};\nconst completeSplitQuery = (key) => (prevState) => {\n  const completedSplit = prevState.ongoingSplits[key];\n  if (completedSplit === void 0) {\n    return prevState;\n  }\n  const queries = { ...prevState.queries };\n  delete queries[key];\n  const ongoingSplits = { ...prevState.ongoingSplits };\n  delete ongoingSplits[key];\n  let pageKeys = prevState.pageKeys.slice();\n  const pageIndex = prevState.pageKeys.findIndex((v) => v === key);\n  if (pageIndex >= 0) {\n    pageKeys = [\n      ...prevState.pageKeys.slice(0, pageIndex),\n      ...completedSplit,\n      ...prevState.pageKeys.slice(pageIndex + 1)\n    ];\n  }\n  return {\n    ...prevState,\n    queries,\n    pageKeys,\n    ongoingSplits\n  };\n};\nexport function usePaginatedQuery(query, args, options) {\n  if (typeof options?.initialNumItems !== \"number\" || options.initialNumItems < 0) {\n    throw new Error(\n      `\\`options.initialNumItems\\` must be a positive number. Received \\`${options?.initialNumItems}\\`.`\n    );\n  }\n  const skip = args === \"skip\";\n  const argsObject = skip ? {} : args;\n  const queryName = getFunctionName(query);\n  const createInitialState = useMemo(() => {\n    return () => {\n      const id = nextPaginationId();\n      return {\n        query,\n        args: argsObject,\n        id,\n        nextPageKey: 1,\n        pageKeys: skip ? [] : [0],\n        queries: skip ? {} : {\n          0: {\n            query,\n            args: {\n              ...argsObject,\n              paginationOpts: {\n                numItems: options.initialNumItems,\n                cursor: null,\n                id\n              }\n            }\n          }\n        },\n        ongoingSplits: {},\n        skip\n      };\n    };\n  }, [\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    JSON.stringify(convexToJson(argsObject)),\n    queryName,\n    options.initialNumItems,\n    skip\n  ]);\n  const [state, setState] = useState(createInitialState);\n  let currState = state;\n  if (getFunctionName(query) !== getFunctionName(state.query) || JSON.stringify(convexToJson(argsObject)) !== JSON.stringify(convexToJson(state.args)) || skip !== state.skip) {\n    currState = createInitialState();\n    setState(currState);\n  }\n  const convexClient = useConvex();\n  const logger = convexClient.logger;\n  const resultsObject = useQueries(currState.queries);\n  const [results, maybeLastResult] = useMemo(() => {\n    let currResult = void 0;\n    const allItems = [];\n    for (const pageKey of currState.pageKeys) {\n      currResult = resultsObject[pageKey];\n      if (currResult === void 0) {\n        break;\n      }\n      if (currResult instanceof Error) {\n        if (currResult.message.includes(\"InvalidCursor\") || currResult instanceof ConvexError && typeof currResult.data === \"object\" && currResult.data?.isConvexSystemError === true && currResult.data?.paginationError === \"InvalidCursor\") {\n          logger.warn(\n            \"usePaginatedQuery hit error, resetting pagination state: \" + currResult.message\n          );\n          setState(createInitialState);\n          return [[], void 0];\n        } else {\n          throw currResult;\n        }\n      }\n      const ongoingSplit = currState.ongoingSplits[pageKey];\n      if (ongoingSplit !== void 0) {\n        if (resultsObject[ongoingSplit[0]] !== void 0 && resultsObject[ongoingSplit[1]] !== void 0) {\n          setState(completeSplitQuery(pageKey));\n        }\n      } else if (currResult.splitCursor && (currResult.pageStatus === \"SplitRecommended\" || currResult.pageStatus === \"SplitRequired\" || currResult.page.length > options.initialNumItems * 2)) {\n        setState(\n          splitQuery(\n            pageKey,\n            currResult.splitCursor,\n            currResult.continueCursor\n          )\n        );\n      }\n      if (currResult.pageStatus === \"SplitRequired\") {\n        return [allItems, void 0];\n      }\n      allItems.push(...currResult.page);\n    }\n    return [allItems, currResult];\n  }, [\n    resultsObject,\n    currState.pageKeys,\n    currState.ongoingSplits,\n    options.initialNumItems,\n    createInitialState,\n    logger\n  ]);\n  const statusObject = useMemo(() => {\n    if (maybeLastResult === void 0) {\n      if (currState.nextPageKey === 1) {\n        return {\n          status: \"LoadingFirstPage\",\n          isLoading: true,\n          loadMore: (_numItems) => {\n          }\n        };\n      } else {\n        return {\n          status: \"LoadingMore\",\n          isLoading: true,\n          loadMore: (_numItems) => {\n          }\n        };\n      }\n    }\n    if (maybeLastResult.isDone) {\n      return {\n        status: \"Exhausted\",\n        isLoading: false,\n        loadMore: (_numItems) => {\n        }\n      };\n    }\n    const continueCursor = maybeLastResult.continueCursor;\n    let alreadyLoadingMore = false;\n    return {\n      status: \"CanLoadMore\",\n      isLoading: false,\n      loadMore: (numItems) => {\n        if (!alreadyLoadingMore) {\n          alreadyLoadingMore = true;\n          setState((prevState) => {\n            const pageKeys = [...prevState.pageKeys, prevState.nextPageKey];\n            const queries = { ...prevState.queries };\n            queries[prevState.nextPageKey] = {\n              query: prevState.query,\n              args: {\n                ...prevState.args,\n                paginationOpts: {\n                  numItems,\n                  cursor: continueCursor,\n                  id: prevState.id\n                }\n              }\n            };\n            return {\n              ...prevState,\n              nextPageKey: prevState.nextPageKey + 1,\n              pageKeys,\n              queries\n            };\n          });\n        }\n      }\n    };\n  }, [maybeLastResult, currState.nextPageKey]);\n  return {\n    results,\n    ...statusObject\n  };\n}\nlet paginationId = 0;\nfunction nextPaginationId() {\n  paginationId++;\n  return paginationId;\n}\nexport function resetPaginationId() {\n  paginationId = 0;\n}\nexport function optimisticallyUpdateValueInPaginatedQuery(localStore, query, args, updateValue) {\n  const expectedArgs = JSON.stringify(convexToJson(args));\n  for (const queryResult of localStore.getAllQueries(query)) {\n    if (queryResult.value !== void 0) {\n      const { paginationOpts: _, ...innerArgs } = queryResult.args;\n      if (JSON.stringify(convexToJson(innerArgs)) === expectedArgs) {\n        const value = queryResult.value;\n        if (typeof value === \"object\" && value !== null && Array.isArray(value.page)) {\n          localStore.setQuery(query, queryResult.args, {\n            ...value,\n            page: value.page.map(updateValue)\n          });\n        }\n      }\n    }\n  }\n}\nexport function insertAtTop(options) {\n  const { paginatedQuery, argsToMatch, localQueryStore, item } = options;\n  const queries = localQueryStore.getAllQueries(paginatedQuery);\n  const queriesThatMatch = queries.filter((q) => {\n    if (argsToMatch === void 0) {\n      return true;\n    }\n    return Object.keys(argsToMatch).every(\n      // @ts-expect-error -- This should be safe since both should be plain objects\n      (k) => compareValues(argsToMatch[k], q.args[k]) === 0\n    );\n  });\n  const firstPage = queriesThatMatch.find(\n    (q) => q.args.paginationOpts.cursor === null\n  );\n  if (firstPage === void 0 || firstPage.value === void 0) {\n    return;\n  }\n  localQueryStore.setQuery(paginatedQuery, firstPage.args, {\n    ...firstPage.value,\n    page: [item, ...firstPage.value.page]\n  });\n}\nexport function insertAtBottomIfLoaded(options) {\n  const { paginatedQuery, localQueryStore, item, argsToMatch } = options;\n  const queries = localQueryStore.getAllQueries(paginatedQuery);\n  const queriesThatMatch = queries.filter((q) => {\n    if (argsToMatch === void 0) {\n      return true;\n    }\n    return Object.keys(argsToMatch).every(\n      // @ts-expect-error -- This should be safe since both should be plain objects\n      (k) => compareValues(argsToMatch[k], q.args[k]) === 0\n    );\n  });\n  const lastPage = queriesThatMatch.find(\n    (q) => q.value !== void 0 && q.value.isDone\n  );\n  if (lastPage === void 0) {\n    return;\n  }\n  localQueryStore.setQuery(paginatedQuery, lastPage.args, {\n    ...lastPage.value,\n    page: [...lastPage.value.page, item]\n  });\n}\nexport function insertAtPosition(options) {\n  const {\n    paginatedQuery,\n    sortOrder,\n    sortKeyFromItem,\n    localQueryStore,\n    item,\n    argsToMatch\n  } = options;\n  const queries = localQueryStore.getAllQueries(paginatedQuery);\n  const queryGroups = {};\n  for (const query of queries) {\n    if (argsToMatch !== void 0 && !Object.keys(argsToMatch).every(\n      (k) => (\n        // @ts-ignore why is this not working?\n        argsToMatch[k] === query.args[k]\n      )\n    )) {\n      continue;\n    }\n    const key = JSON.stringify(\n      Object.fromEntries(\n        Object.entries(query.args).map(([k, v]) => [\n          k,\n          k === \"paginationOpts\" ? v.id : v\n        ])\n      )\n    );\n    queryGroups[key] ?? (queryGroups[key] = []);\n    queryGroups[key].push(query);\n  }\n  for (const pageQueries of Object.values(queryGroups)) {\n    insertAtPositionInPages({\n      pageQueries,\n      paginatedQuery,\n      sortOrder,\n      sortKeyFromItem,\n      localQueryStore,\n      item\n    });\n  }\n}\nfunction insertAtPositionInPages(options) {\n  const {\n    pageQueries,\n    sortOrder,\n    sortKeyFromItem,\n    localQueryStore,\n    item,\n    paginatedQuery\n  } = options;\n  const insertedKey = sortKeyFromItem(item);\n  const loadedPages = pageQueries.filter(\n    (q) => q.value !== void 0 && q.value.page.length > 0\n  );\n  const sortedPages = loadedPages.sort((a, b) => {\n    const aKey = sortKeyFromItem(a.value.page[0]);\n    const bKey = sortKeyFromItem(b.value.page[0]);\n    if (sortOrder === \"asc\") {\n      return compareValues(aKey, bKey);\n    } else {\n      return compareValues(bKey, aKey);\n    }\n  });\n  const firstLoadedPage = sortedPages[0];\n  if (firstLoadedPage === void 0) {\n    return;\n  }\n  const firstPageKey = sortKeyFromItem(firstLoadedPage.value.page[0]);\n  const isBeforeFirstPage = sortOrder === \"asc\" ? compareValues(insertedKey, firstPageKey) <= 0 : compareValues(insertedKey, firstPageKey) >= 0;\n  if (isBeforeFirstPage) {\n    if (firstLoadedPage.args.paginationOpts.cursor === null) {\n      localQueryStore.setQuery(paginatedQuery, firstLoadedPage.args, {\n        ...firstLoadedPage.value,\n        page: [item, ...firstLoadedPage.value.page]\n      });\n    } else {\n      return;\n    }\n    return;\n  }\n  const lastLoadedPage = sortedPages[sortedPages.length - 1];\n  if (lastLoadedPage === void 0) {\n    return;\n  }\n  const lastPageKey = sortKeyFromItem(\n    lastLoadedPage.value.page[lastLoadedPage.value.page.length - 1]\n  );\n  const isAfterLastPage = sortOrder === \"asc\" ? compareValues(insertedKey, lastPageKey) >= 0 : compareValues(insertedKey, lastPageKey) <= 0;\n  if (isAfterLastPage) {\n    if (lastLoadedPage.value.isDone) {\n      localQueryStore.setQuery(paginatedQuery, lastLoadedPage.args, {\n        ...lastLoadedPage.value,\n        page: [...lastLoadedPage.value.page, item]\n      });\n    }\n    return;\n  }\n  const successorPageIndex = sortedPages.findIndex(\n    (p) => sortOrder === \"asc\" ? compareValues(sortKeyFromItem(p.value.page[0]), insertedKey) > 0 : compareValues(sortKeyFromItem(p.value.page[0]), insertedKey) < 0\n  );\n  const pageToUpdate = successorPageIndex === -1 ? sortedPages[sortedPages.length - 1] : sortedPages[successorPageIndex - 1];\n  if (pageToUpdate === void 0) {\n    return;\n  }\n  const indexWithinPage = pageToUpdate.value.page.findIndex(\n    (e) => sortOrder === \"asc\" ? compareValues(sortKeyFromItem(e), insertedKey) >= 0 : compareValues(sortKeyFromItem(e), insertedKey) <= 0\n  );\n  const newPage = indexWithinPage === -1 ? [...pageToUpdate.value.page, item] : [\n    ...pageToUpdate.value.page.slice(0, indexWithinPage),\n    item,\n    ...pageToUpdate.value.page.slice(indexWithinPage)\n  ];\n  localQueryStore.setQuery(paginatedQuery, pageToUpdate.args, {\n    ...pageToUpdate.value,\n    page: newPage\n  });\n}\n//# sourceMappingURL=use_paginated_query.js.map\n","/**\n * @license lucide-react v0.475.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\", key: \"1m0v6g\" }],\n  [\n    \"path\",\n    {\n      d: \"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z\",\n      key: \"ohrbg2\"\n    }\n  ]\n];\nconst SquarePen = createLucideIcon(\"SquarePen\", __iconNode);\n\nexport { __iconNode, SquarePen as default };\n//# sourceMappingURL=square-pen.js.map\n","import { useSearch, Link, useLocation } from '@tanstack/react-router';\nimport { SquarePen } from 'lucide-react';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '~/components/ui/tooltip';\nimport type { AppCollection } from '~/types';\nimport { cn } from '~/lib/utils';\nimport { uiTempStore$ } from '~/stores/ui';\nimport { observer, use$ } from '@legendapp/state/react';\nimport { collectionStore$ } from '~/stores/collection';\nimport { CollectionSeedDisplay } from './CollectionSeedDisplay';\nimport { serializeCoeffs } from '~/lib/serialization';\nimport { DEFAULT_COLLECTION_PAGE_SIZE } from '~/routes/_layout';\nimport { useEffect, useRef } from 'react';\n\ntype CollectionsDisplayProps = {\n  collections: AppCollection[];\n  likedSeeds?: Record<string, boolean>;\n  likesPending: boolean;\n  isLoading?: boolean;\n};\n\nexport const CollectionsDisplay = observer(function CollectionsDisplay({\n  collections: initialCollections,\n  likedSeeds,\n  likesPending,\n  isLoading = false,\n}: CollectionsDisplayProps) {\n  const { href } = useLocation();\n  const { style, steps, angle } = useSearch({ from: '/_layout' });\n\n  const storeCollections = use$(collectionStore$.collections);\n  const hasUserModifiedStore = useRef(false);\n\n  // Only update store when not loading AND when the data has actually changed\n  useEffect(() => {\n    if (!isLoading) {\n      // Reset the modification flag when we get fresh data\n      hasUserModifiedStore.current = false;\n      collectionStore$.collections.set(initialCollections);\n    }\n  }, [initialCollections, isLoading]);\n\n  // Use initialCollections unless the user has made modifications\n  // This prevents the jarring transition during loading\n  const collections =\n    hasUserModifiedStore.current && storeCollections.length > 0\n      ? storeCollections\n      : initialCollections;\n\n  const onChannelOrderChange = (newCoeffs: AppCollection['coeffs'], collection: AppCollection) => {\n    // Generate new seed from the updated coefficients\n    const newSeed = serializeCoeffs(newCoeffs, collection.globals);\n\n    // Find the collection in the current collections array\n    const collectionIndex = collections.findIndex((c) => String(c._id) === String(collection._id));\n    const initialCollection = collections.find((c) => String(c._id) === String(collection._id));\n\n    if (collectionIndex !== -1) {\n      // Create a new array with the updated collection\n      const updatedCollections = [...collections];\n      updatedCollections[collectionIndex] = {\n        ...collections[collectionIndex],\n        coeffs: newCoeffs,\n        seed: newSeed,\n        // Reset likes to 0 since this is now a different gradient\n        likes: newSeed !== initialCollection?.seed ? 0 : initialCollection?.likes || 0,\n      };\n\n      // Mark that the user has modified the store\n      hasUserModifiedStore.current = true;\n\n      // Update the store for reactivity\n      collectionStore$.collections.set(updatedCollections);\n    }\n  };\n\n  return (\n    <section className=\"h-full w-full relative\">\n      <ol\n        className={cn(\n          'h-full w-full relative px-5 lg:px-14',\n          'grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 3xl:grid-cols-5 4xl:grid-cols-6 gap-x-10 gap-y-20 auto-rows-[300px]',\n        )}\n      >\n        {/* Always render existing collections first */}\n        {collections.map((collection, index) => {\n          const activeCollectionId = use$(uiTempStore$.activeCollectionId);\n          const itemActive = activeCollectionId === collection._id;\n\n          // Calculate values needed for action buttons\n          const previewStyle = use$(uiTempStore$.previewStyle);\n          const previewSteps = use$(uiTempStore$.previewSteps);\n          const previewAngle = use$(uiTempStore$.previewAngle);\n          const previewSeed = use$(uiTempStore$.previewSeed);\n\n          const stepsToUse =\n            previewSteps !== null ? previewSteps : steps === 'auto' ? collection.steps : steps;\n\n          const styleToUse =\n            previewStyle !== null ? previewStyle : style === 'auto' ? collection.style : style;\n          const angleToUse =\n            previewAngle !== null || angle !== 'auto'\n              ? (previewAngle ??\n                (typeof angle === 'number' ? parseFloat(angle.toFixed(1)) : collection.angle))\n              : collection.angle;\n\n          return (\n            <li\n              key={collection._id}\n              className={cn('relative group', 'w-full font-poppins')}\n              onClick={() => {\n                if (itemActive) uiTempStore$.activeCollectionId.set(null);\n                else uiTempStore$.activeCollectionId.set(collection._id);\n              }}\n              onMouseLeave={() => {\n                // Clear preview seed if set\n                if (!previewSeed) return;\n                uiTempStore$.previewSeed.set(null);\n              }}\n              tabIndex={0}\n              role=\"button\"\n              aria-pressed={itemActive}\n              aria-label={`${itemActive ? 'Deselect' : 'Select'} gradient ${index + 1} for actions`}\n            >\n              <CollectionSeedDisplay\n                collection={collection}\n                index={index}\n                likedSeeds={likedSeeds}\n                style={styleToUse}\n                steps={stepsToUse}\n                angle={angleToUse}\n                href={href}\n                onChannelOrderChange={onChannelOrderChange}\n                itemActive={itemActive}\n                likesPending={likesPending}\n              >\n                {/* Top-left Details button */}\n                <div\n                  className={cn('absolute top-3.5 left-3.5 z-10 transition-opacity', {\n                    'opacity-0 group-hover:opacity-100': !itemActive,\n                    'opacity-100': itemActive,\n                  })}\n                >\n                  <Link\n                    to=\"/$seed\"\n                    params={{\n                      seed: collection.seed,\n                    }}\n                    search={(search) => {\n                      return {\n                        ...search,\n                        angle: angle === 'auto' ? collection.angle : search.angle,\n                        style: style === 'auto' ? collection.style : search.style,\n                        steps: steps === 'auto' ? collection.steps : search.steps,\n                      };\n                    }}\n                    className=\"block text-foreground/80 hover:text-foreground transition-colors\"\n                    aria-label={`View details for gradient ${index + 1}`}\n                  >\n                    <div className=\"bg-background/20 backdrop-blur-sm rounded-md transition-all flex items-center justify-center px-0.5 z-10 h-8 w-9 hover:bg-background/40\">\n                      <div className=\"p-1.5 rounded-full transition-colors cursor-pointer hover:text-foreground\">\n                        <TooltipProvider>\n                          <Tooltip>\n                            <TooltipTrigger asChild>\n                              <SquarePen className=\"w-5 h-5 text-foreground\" />\n                            </TooltipTrigger>\n                            <TooltipContent>\n                              <span>Edit Palette</span>\n                            </TooltipContent>\n                          </Tooltip>\n                        </TooltipProvider>\n                      </div>\n                    </div>\n                  </Link>\n                </div>\n              </CollectionSeedDisplay>\n            </li>\n          );\n        })}\n\n        {/* Render placeholder items when loading more */}\n        {isLoading && (\n          <>\n            {Array.from({ length: DEFAULT_COLLECTION_PAGE_SIZE }).map((_, index) => (\n              <li key={`placeholder-${index}`} className=\"w-full relative\">\n                {/* Gradient placeholder with border and animation */}\n                <div className=\"h-[300px] w-full rounded-lg border-2 border-muted animate-pulse\">\n                  {/* Empty div with just a border and animation */}\n                </div>\n\n                {/* Like button placeholder */}\n                <div className=\"flex justify-between pt-4 relative\">\n                  <div className=\"flex items-center\">{/* Empty space for RGB tabs */}</div>\n                  <div className=\"flex items-center min-h-[28px]\">\n                    {/* Non-interactive like button */}\n                    <div className=\"relative text-muted-foreground\">\n                      <div className=\"rounded-full cursor-not-allowed opacity-50\">\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          width=\"22\"\n                          height=\"22\"\n                          viewBox=\"0 0 24 24\"\n                          fill=\"none\"\n                          stroke=\"currentColor\"\n                          strokeWidth=\"2\"\n                          strokeLinecap=\"round\"\n                          strokeLinejoin=\"round\"\n                          className=\"w-5.5 h-5.5\"\n                        >\n                          <path d=\"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\" />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </li>\n            ))}\n          </>\n        )}\n      </ol>\n    </section>\n  );\n});\n"],"names":["arr","__defProp","__defNormalProp","obj","key","value","__publicField","QueriesObserver","createWatch","newQueries","identifier","query","args","getFunctionName","existingInfo","convexToJson","listener","queries","result","watch","e","journal","unsubscribe","info","useSubscription","getCurrentValue","subscribe","state","setState","useState","valueToReturn","useEffect","didUnsubscribe","checkForUpdates","prevState","useQueries","convex","useConvex","useMemo","useQueriesHelper","observer","subscription","callback","splitQuery","splitCursor","continueCursor","splitKey1","splitKey2","nextPageKey","ongoingSplits","completeSplitQuery","completedSplit","pageKeys","pageIndex","v","usePaginatedQuery","options","skip","argsObject","queryName","createInitialState","id","nextPaginationId","currState","logger","resultsObject","results","maybeLastResult","currResult","allItems","pageKey","ConvexError","_a","_b","ongoingSplit","statusObject","_numItems","alreadyLoadingMore","numItems","paginationId","__iconNode","SquarePen","createLucideIcon","CollectionsDisplay","collections","initialCollections","likedSeeds","likesPending","isLoading","href","useLocation","style","steps","angle","useSearch","from","storeCollections","use$","collectionStore$","hasUserModifiedStore","useRef","current","set","length","onChannelOrderChange","newCoeffs","collection","newSeed","serializeCoeffs","globals","collectionIndex","findIndex","String","c","_id","initialCollection","find","updatedCollections","coeffs","seed","likes","jsx","jsxs","cn","map","index","itemActive","uiTempStore$","activeCollectionId","previewStyle","previewSteps","previewAngle","previewSeed","stepsToUse","styleToUse","angleToUse","parseFloat","toFixed","CollectionSeedDisplay","Link","search","TooltipProvider","Tooltip","TooltipTrigger","TooltipContent","Array","DEFAULT_COLLECTION_PAGE_SIZE","_"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}